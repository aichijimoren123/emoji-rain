<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <title>å¾®ä¿¡é£æ ¼è¡¨æƒ…é›¨ï¼ˆè‡ªç„¶ç‰ˆï¼‰</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #0f172a;
            color: white;
            font-family: sans-serif;
        }

        /* ç®€å•è¾“å…¥æ¡† */
        .input-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            gap: 8px;
        }

        input {
            flex: 1;
            padding: 8px 12px;
            border-radius: 6px;
            border: none;
            outline: none;
            font-size: 16px;
        }

        button {
            padding: 8px 16px;
            border: none;
            background: #22d3ee;
            font-weight: bold;
            border-radius: 6px;
            cursor: pointer;
        }

        /* ä¸‹è½åŠ¨ç”»ï¼šåªåšå‚ç›´ç§»åŠ¨ï¼Œä¸æ—‹è½¬ã€ä¸é€æ˜åº¦å˜åŒ– */
        @keyframes fall {
            from {
                transform: translateY(-80px);
            }

            to {
                transform: translateY(110vh);
            }
        }

        .emoji {
            position: absolute;
            pointer-events: none;
            user-select: none;
            will-change: transform;
        }
    </style>
</head>

<body>

    <div class="input-bar">
        <input id="msg" placeholder="è¾“å…¥æ¶ˆæ¯ï¼Œå¦‚ï¼šç”Ÿæ—¥å¿«ä¹ / çˆ±ä½  / ğŸ˜‚ğŸ¤£" />
        <button onclick="sendMessage()">å‘é€</button>
    </div>

    <script>
        /**
         * ğŸŒŸ è¡¨æƒ…è§¦å‘è¯é…ç½®
         * message â†’ è¡¨æƒ…æ•°ç»„
         */
        const EMOJI_MAP = {
            "ç”Ÿæ—¥å¿«ä¹": ["ğŸ‚", "ğŸ‰", "âœ¨"],
            "æˆ‘çˆ±ä½ ": ["â¤ï¸", "ğŸ’–", "ğŸ’•"],
            "å“ˆå“ˆ": ["ğŸ˜‚", "ğŸ¤£"],
            "å‘è´¢": ["ğŸ§§", "ğŸ’°", "ğŸª™"]
        };

        /**
         * ğŸŒŸ è§¦å‘è¡¨æƒ…é›¨
         */
        function triggerEmojiRain(emojiList) {
            const count = 12; // å°‘é‡å³å¯ï¼Œæ›´è‡ªç„¶
            let index = 0;

            function dropNext() {
                if (index >= count) return;
                createDrop(emojiList);
                index++;

                // ğŸŒŸ æ¯ä¸ªè¡¨æƒ…é—´éš”éšæœº 80ms - 200msï¼Œæ›´è‡ªç„¶
                const delay = 80 + Math.random() * 120;
                setTimeout(dropNext, delay);
            }

            dropNext();
        }

        /**
         * ğŸŒŸ åˆ›å»ºä¸€ä¸ªä¸‹è½çš„è¡¨æƒ…
         */
        function createDrop(emojiList) {
            const emoji = emojiList[Math.floor(Math.random() * emojiList.length)];

            const el = document.createElement("div");
            el.className = "emoji";
            el.textContent = emoji;

            // éšæœºå¤§å°ï¼ˆæ›´åƒå¾®ä¿¡ï¼‰
            const size = 36 + Math.random() * 22; // 36px - 58px
            el.style.fontSize = size + "px";

            // éšæœºæ°´å¹³ä½ç½®
            el.style.left = Math.random() * 100 + "vw";

            // ğŸŒŸ å›ºå®šéšæœºè§’åº¦ï¼ˆä¾‹å¦‚ -40Â° ~ 40Â°ï¼‰
            const angle = (Math.random() * 80 - 40).toFixed(1);
            el.style.transform = `rotate(${angle}deg)`;

            // è®¾ç½®åŠ¨ç”»
            const duration = 2.8 + Math.random() * 1.5; // 2.8 ~ 4.3 ç§’
            el.style.animation = `fall ${duration}s linear`;

            document.body.appendChild(el);

            // åŠ¨ç”»ç»“æŸåˆ é™¤
            el.addEventListener("animationend", () => el.remove());
        }

        /**
         * ğŸŒŸ æ¨¡æ‹ŸèŠå¤©å‘é€
         */
        function sendMessage() {
            const msg = document.getElementById("msg").value.trim();
            if (!msg) return;

            // æ£€æŸ¥è§¦å‘è¯
            for (const key in EMOJI_MAP) {
                if (msg.includes(key)) {
                    triggerEmojiRain(EMOJI_MAP[key]);
                    break;
                }
            }

            document.getElementById("msg").value = "";
        }
    </script>
</body>

</html>